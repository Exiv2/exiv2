.build_template: &distro_build
  script:
    - python3 ci/test_build.py

fedora_build:
  image: fedora:latest
  before_script:
    - dnf -y install --refresh 'dnf-command(copr)'
    - dnf -y copr enable defolos/devel
    - dnf clean all
    - dnf -y install gcc-c++ clang cmake make expat-devel.x86_64 zlib-devel.x86_64 libssh-devel.x86_64 libcurl-devel.x86_64 gtest-devel.x86_64
  <<: *distro_build

debian_build:
  image: debian:9
  before_script:
    - apt-get update
    - apt-get install -y cmake g++ clang make python3 libexpat1-dev zlib1g-dev libssh-dev libcurl4-openssl-dev
  <<: *distro_build
