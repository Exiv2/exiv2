contrib/buildserver/ReadMe.txt
------------------------------

737 rmills@rmillsmm:~/gnu/exiv2/trunk/contrib/buildserver $ dir
User Documentation and Scripts
-rw-r--r--@ 1 rmills  staff    63B 15 Dec 22:26 ReadMe.txt                <---- This file
-rwxr-xr-x@ 1 rmills  staff   440B 15 Dec 23:07 cmakeDailyAll.sh*         <---- run cmake_daily.sh on all platforms
-rwxr-xr-x@ 1 rmills  staff   424B 14 Dec 23:12 testDailyAll.sh*          <---- run test_daily.sh on all platform

Documentation and Scripts used by Jenkins
-rwxr-xr-x+ 1 rmills  staff    11K 15 Dec 22:17 jenkins_build.sh*         <---- Primary build script (called by Jenkins)
-rw-r--r--+ 1 rmills  staff   6.3K 15 Dec 22:17 jenkins_build.bat         <---- Windows build script (called by jenkins_build.sh)
-rwxr-xr-x@ 1 rmills  staff   5.8K 14 Dec 21:55 cmake_daily.sh*           <---- Builds exiv2 using cmake on all platforms
-rwxr-xr-x@ 1 rmills  staff   3.6K 15 Dec 05:49 test_daily.sh*            <---- Called by Jenkins to sync and build all platforms
-rw-r--r--@ 1 rmills  staff   4.0K 14 Dec 18:31 dailyReadMe.txt           <---- Template for the bundle ReadMe.txt generated by cmake_daily.sh


Buildserver Configuration
-------------------------

The buildserver configuration scripts are located here:

523 rmills@rmillsmbp:/mmHD/Users/Shared/Jenkins/Home/jobs $ dir
drwxr-xr-x  1 rmills  staff   296B 16 Dec 10:22 Exiv2-trunk/
drwxr-xr-x  1 rmills  staff   296B 16 Dec 10:22 test-cmake-daily/
drwxr-xr-x  1 rmills  staff   264B 16 Dec 02:47 trunk-cmake-daily/
drwxrwxrwx  1 rmills  staff   296B 13 Dec 23:07 Exiv2-videow-refactoring/
drwxr-xr-x  1 rmills  staff   296B 12 May  2015 Exiv2-jenkins/
drwxr-xr-x  1 rmills  staff   330B  2 May  2015 Exiv2-video-write/

540 rmills@rmillsmbp:/mmHD/Users/Shared/Jenkins/Home/jobs/Exiv2-trunk $ dir
-rw-r--r--  1 rmills  staff   8.1K 16 Dec 10:22 config.xml                <-- the build magic
drwxr-xr-x  1 rmills  staff   264B 29 Dec  2014 configurations/           <--- history of config/build
drwxr-xr-x  1 rmills  staff   1.2K 15 Dec 22:38 builds/                   <-- logs
-rw-r--r--  1 rmills  staff    78B 16 Dec 10:26 scm-polling.log           <-- name says it all
lrwxr-xr-x  1 rmills  staff    22B 15 Dec 22:26 lastStable@ -> builds/lastStableBuild
lrwxr-xr-x  1 rmills  staff    26B 15 Dec 22:26 lastSuccessful@ -> builds/lastSuccessfulBuild
-rw-r--r--  1 rmills  staff     5B 15 Dec 22:26 nextBuildNumber
-rw-r--r--  1 rmills  staff    46B 15 Dec 22:26 svnexternals.txt          <-- don't know (nothing important)
541 rmills@rmillsmbp:/mmHD/Users/Shared/Jenkins/Home/jobs/Exiv2-trunk $

I've added Exiv2-trunk/config.xml to the repos.  I'll add something to jenkins_build.sh to keep it up to date.

Buildserver Scripts
-------------------

Stable scripts and unlikely to change
Exiv2-trunk (and selected branches):
Runs: when svn trunk changes
./contrib/buildserver/jenkins_build.sh

Caution: older branches have jenkins_build.sh and jenkins_build.bat
         in the root of the repos

Volatile Scripts - still work in progress
trunk-cmake-daily:
Runs: 2am every day
ssh rmills@rmillsmm                         'cd ~/gnu/exiv2/buildserver ; /usr/local/bin/svn update . ; contrib/buildserver/cmake_daily.sh'
ssh rmills@rmillsmm-kubuntu                 'cd ~/gnu/exiv2/buildserver ; /usr/local/bin/svn update . ; contrib/buildserver/cmake_daily.sh'
ssh rmills@rmillsmm-w7                      'cd ~/gnu/exiv2/buildserver ; /usr/local/bin/svn update . ; contrib/buildserver/cmake_daily.sh'
ssh rmills@rmillsmm-w7 'export PLATFORM=msvc;cd ~/gnu/exiv2/buildserver ; /usr/local/bin/svn update . ; contrib/buildserver/cmake_daily.sh'

test-cmake-daily:
Runs: 5am every day
ssh rmills@rmillsmm         'PLATFORM=macosx ~/gnu/exiv2/buildserver/contrib/buildserver/test_daily.sh'
ssh rmills@rmillsmm-kubuntu 'PLATFORM=linux  ~/gnu/exiv2/buildserver/contrib/buildserver/test_daily.sh'
ssh rmills@rmillsmm-w7      'PLATFORM=cygwin ~/gnu/exiv2/buildserver/contrib/buildserver/test_daily.sh'
ssh rmills@rmillsmm-w7      'PLATFORM=msvc   ~/gnu/exiv2/buildserver/contrib/buildserver/test_daily.sh'

Robin Mills
robin@clanmills.com
2015-12-16
